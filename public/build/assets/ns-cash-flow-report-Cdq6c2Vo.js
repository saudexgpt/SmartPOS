import{h as u}from"./print-DOU-TAfv.js";import{c as y,e as f}from"./components-BW7iHnNb.js";import{a as x,b as g}from"./bootstrap-DN_KIGH5.js";import{_ as v,n as w}from"./currency-gBUix5n2.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as C,o as d,c as l,b as t,g as p,t as e,F as m,e as h,j as i}from"./runtime-core.esm-bundler-DDZT2pc5.js";import"./ns-prompt-popup-CDVMGRH6.js";import"./ns-avatar-image-CD669kPs.js";import"./index.es-BamOKBrQ.js";import"./chart-Ozef1QaY.js";const F={name:"ns-cash-flow",props:["storeLogo","storeName"],mounted(){},components:{nsDatepicker:y,nsDateTimePicker:f},data(){return{startDateField:{value:u(ns.date.current).startOf("month").format("YYYY-MM-DD HH:mm:ss"),type:"datetimepicker"},endDateField:{value:u(ns.date.current).endOf("month").format("YYYY-MM-DD HH:mm:ss"),type:"datetimepicker"},report:new Object,ns:window.ns}},computed:{balance(){return Object.values(this.report).length===0?0:this.report.total_credit-this.report.total_debit},totalDebit(){return 0},totalCredit(){return 0}},methods:{__:v,nsCurrency:w,printSaleReport(){this.$htmlToPaper("report")},loadReport(){x.post("/api/reports/transactions",{startDate:this.startDateField.value,endDate:this.endDateField.value}).subscribe({next:n=>{this.report=n},error:n=>{g.error(n.message).subscribe()}})}}},k={id:"report-section",class:"px-4"},Y={class:"flex -mx-2"},B={class:"px-2"},j={class:"px-2"},R={class:"px-2"},S={class:"ns-button"},H={class:"pl-2"},N={class:"px-2"},L={class:"ns-button"},M={class:"pl-2"},O={id:"report",class:"anim-duration-500 fade-in-entrance"},P={class:"flex w-full"},T={class:"my-4 flex justify-between w-full"},V={class:"text-primary"},A={class:"pb-1 border-b border-dashed"},E={class:"pb-1 border-b border-dashed"},q={class:"pb-1 border-b border-dashed"},z=["src","alt"],I={class:"shadow rounded my-4"},J={class:"ns-box"},K={class:"border-b ns-box-body"},Q={class:"ns-table table w-full"},U={class:""},W={class:"border p-2 text-left"},X={width:"150",class:"border border-error-secondary bg-error-primary p-2 text-right"},Z={width:"150",class:"text-right border-success-secondary bg-success-primary border p-2"},G={class:""},$={class:"p-2 border"},tt={class:"p-2 border border-error-secondary bg-error-primary text-right"},et={class:"p-2 border text-right border-success-secondary bg-success-primary"},st={class:"p-2 border"},rt={class:"p-2 border border-error-secondary bg-error-primary text-right"},ot={class:"p-2 border text-right border-success-secondary bg-success-primary"},at={class:"font-semibold"},dt={class:"p-2 border"},lt={class:"p-2 border border-error-secondary bg-error-primary text-right"},nt={class:"p-2 border text-right border-success-secondary bg-success-primary"},it={class:"p-2 border"},ct={colspan:"2",class:"p-2 border text-right border-info-secondary bg-info-primary"};function _t(n,r,_,bt,o,s){const b=C("ns-field");return d(),l("div",k,[t("div",Y,[t("div",B,[p(b,{field:o.startDateField},null,8,["field"])]),t("div",j,[p(b,{field:o.endDateField},null,8,["field"])]),t("div",R,[t("div",S,[t("button",{onClick:r[0]||(r[0]=a=>s.loadReport()),class:"rounded flex justify-between text-primary shadow py-1 items-center px-2"},[r[2]||(r[2]=t("i",{class:"las la-sync-alt text-xl"},null,-1)),t("span",H,e(s.__("Load")),1)])])]),t("div",N,[t("div",L,[t("button",{onClick:r[1]||(r[1]=a=>s.printSaleReport()),class:"rounded flex justify-between text-primary shadow py-1 items-center px-2"},[r[3]||(r[3]=t("i",{class:"las la-print text-xl"},null,-1)),t("span",M,e(s.__("Print")),1)])])])]),t("div",O,[t("div",P,[t("div",T,[t("div",V,[t("ul",null,[t("li",A,e(s.__("Range : {date1} â€” {date2}").replace("{date1}",o.startDateField.value).replace("{date2}",o.endDateField.value)),1),t("li",E,e(s.__("Document : Sale By Payment")),1),t("li",q,e(s.__("By : {user}").replace("{user}",o.ns.user.username)),1)])]),t("div",null,[t("img",{class:"w-24",src:_.storeLogo,alt:_.storeName},null,8,z)])])]),t("div",I,[t("div",J,[t("div",K,[t("table",Q,[t("thead",U,[t("tr",null,[t("th",W,e(s.__("Account")),1),t("th",X,e(s.__("Debit")),1),t("th",Z,e(s.__("Credit")),1)])]),t("tbody",G,[(d(!0),l(m,null,h(o.report.creditCashFlow,(a,c)=>(d(),l("tr",{key:c},[t("td",$,[r[4]||(r[4]=t("i",{class:"las la-arrow-right"},null,-1)),r[5]||(r[5]=i()),t("strong",null,e(a.account),1),i(" : "+e(a.name),1)]),t("td",tt,e(s.nsCurrency(0)),1),t("td",et,e(s.nsCurrency(a.total)),1)]))),128)),(d(!0),l(m,null,h(o.report.debitCashFlow,(a,c)=>(d(),l("tr",{key:c},[t("td",st,[r[6]||(r[6]=t("i",{class:"las la-arrow-right"},null,-1)),r[7]||(r[7]=i()),t("strong",null,e(a.account),1),i(" : "+e(a.name),1)]),t("td",rt,e(s.nsCurrency(a.total)),1),t("td",ot,e(s.nsCurrency(0)),1)]))),128))]),t("tfoot",at,[t("tr",null,[t("td",dt,e(s.__("Sub Total")),1),t("td",lt,e(s.nsCurrency(o.report.total_debit?o.report.total_debit:0)),1),t("td",nt,e(s.nsCurrency(o.report.total_credit?o.report.total_credit:0)),1)]),t("tr",null,[t("td",it,e(s.__("Balance")),1),t("td",ct,e(s.nsCurrency(s.balance)),1)])])])])])])])])}const Dt=D(F,[["render",_t]]);export{Dt as default};
